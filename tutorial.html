

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; LASIF 0.0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="LASIF 0.0.1 documentation" href="index.html"/>
        <link rel="next" title="How LASIF Finds Coordinates" href="how_lasif_finds_coordinates.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> LASIF</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Installation, Testing &amp; DevInfo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html#developer-information">Developer Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#further-information">Further Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#to-do-things-that-are-still-missing">TO DO: Things that are still missing</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#supported-data-formats">Supported Data Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#further-notes">Further Notes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command Line Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-new-project">Creating a New Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-seismic-events">Adding Seismic Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-waveform-data">Adding Waveform Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#station-data">Station Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#download-helpers">Download Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inspecting-the-data">Inspecting the Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interlude-validating-the-data">Interlude: Validating the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defining-a-new-iteration">Defining a New Iteration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generating-ses3d-input-files">Generating SES3D Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#organizing-the-models">Organizing the Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="#synthetics">Synthetics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#misfit-and-adjoint-source-calculation">Misfit and Adjoint Source Calculation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli.html#data-acquisition-functions">Data Acquisition Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#event-management-functions">Event Management Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#iteration-management-functions">Iteration Management Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#misc-functions">Misc Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#plotting-functions">Plotting Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#project-management-functions">Project Management Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_doc.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="project.html">lasif.project</a></li>
<li class="toctree-l2"><a class="reference internal" href="rotations.html">lasif.rotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="iris2quakeml.html">lasif.scripts.iris2quakeml</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">lasif.tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.parallel.html">lasif.tools.parallel</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">LASIF</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Tutorial</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/tutorial.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will teach you how to perform an iterative full waveform
inversion with LASIF and SES3D on a simple toy example.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p>This tutorial is written by hand and thus might not always be completely
up to date. If for example there are slight necessary deviations to the
arguments of a command please refer to the command&#8217;s documentation.</p>
<p class="last">The rest of LASIF&#8217;s documentation is generated from the actual code and
thus is guaranteed to accurately reflect the code base.</p>
</div>
<div class="section" id="command-line-interface">
<h2>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>LASIF is best controlled with its command line interface. Please read at
least the introduction to the <a class="reference internal" href="cli.html"><em>Command Line Interface</em></a> before proceeding.</p>
</div>
<div class="section" id="creating-a-new-project">
<h2>Creating a New Project<a class="headerlink" href="#creating-a-new-project" title="Permalink to this headline">¶</a></h2>
<p>The necessary first step, whether for starting a new inversion or migrating an
already existing inversion to LASIF, is to create a new project with the
<tt class="code docutils literal"><span class="pre">lasif</span> <span class="pre">init_project</span></tt> command. In this  tutorial we will work with a
project called <strong>Tutorial</strong>. The <tt class="code docutils literal"><span class="pre">lasif</span> <span class="pre">init_project</span></tt> command will
create a  new folder in whichever directory the command is executed in.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif init_project Tutorial

Initialized project in:
    /Users/lion/workspace/temp/LASIF_Tutorial/Tutorial
</pre></div>
</div>
<p>This will create the following directory structure. A <strong>LASIF</strong> project is
defined by the files it contains. All information it requires will be
assembled from the available data. In the course of this tutorial you will
learn what piece of data belongs where.</p>
<div class="highlight-none"><div class="highlight"><pre>Tutorial
├── ADJOINT_SOURCES_AND_WINDOWS
│   ├── ADJOINT_SOURCES
│   └── WINDOWS
├── CACHE
├── DATA
├── EVENTS
├── ITERATIONS
├── KERNELS
├── LOGS
├── MODELS
├── OUTPUT
├── STATIONS
│   ├── RESP
│   ├── SEED
│   └── StationXML
├── SYNTHETICS
├── WAVEFIELDS
└── config.xml
</pre></div>
</div>
<p>Each project stores its configuration values in the <strong>config.xml</strong> file; the
location of this file also determines the root folder of the project. It is
a simple, self-explanatory XML format. Immediately after the project has been
initialized it looks akin to the following:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;lasif_project&gt;</span>
  <span class="nt">&lt;name&gt;</span>Tutorial<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;download_settings&gt;</span>
    <span class="nt">&lt;arclink_username&gt;&lt;/arclink_username&gt;</span>
    <span class="nt">&lt;seconds_before_event&gt;</span>300<span class="nt">&lt;/seconds_before_event&gt;</span>
    <span class="nt">&lt;seconds_after_event&gt;</span>3600<span class="nt">&lt;/seconds_after_event&gt;</span>
  <span class="nt">&lt;/download_settings&gt;</span>
  <span class="nt">&lt;domain&gt;</span>
    <span class="nt">&lt;domain_bounds&gt;</span>
      <span class="nt">&lt;minimum_longitude&gt;</span>-20<span class="nt">&lt;/minimum_longitude&gt;</span>
      <span class="nt">&lt;maximum_longitude&gt;</span>20<span class="nt">&lt;/maximum_longitude&gt;</span>
      <span class="nt">&lt;minimum_latitude&gt;</span>-20<span class="nt">&lt;/minimum_latitude&gt;</span>
      <span class="nt">&lt;maximum_latitude&gt;</span>20<span class="nt">&lt;/maximum_latitude&gt;</span>
      <span class="nt">&lt;minimum_depth_in_km&gt;</span>0.0<span class="nt">&lt;/minimum_depth_in_km&gt;</span>
      <span class="nt">&lt;maximum_depth_in_km&gt;</span>200.0<span class="nt">&lt;/maximum_depth_in_km&gt;</span>
      <span class="nt">&lt;boundary_width_in_degree&gt;</span>3.0<span class="nt">&lt;/boundary_width_in_degree&gt;</span>
    <span class="nt">&lt;/domain_bounds&gt;</span>
    <span class="nt">&lt;domain_rotation&gt;</span>
      <span class="nt">&lt;rotation_axis_x&gt;</span>1.0<span class="nt">&lt;/rotation_axis_x&gt;</span>
      <span class="nt">&lt;rotation_axis_y&gt;</span>1.0<span class="nt">&lt;/rotation_axis_y&gt;</span>
      <span class="nt">&lt;rotation_axis_z&gt;</span>1.0<span class="nt">&lt;/rotation_axis_z&gt;</span>
      <span class="nt">&lt;rotation_angle_in_degree&gt;</span>-45.0<span class="nt">&lt;/rotation_angle_in_degree&gt;</span>
    <span class="nt">&lt;/domain_rotation&gt;</span>
  <span class="nt">&lt;/domain&gt;</span>
<span class="nt">&lt;/lasif_project&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the project&#8217;s name.</li>
<li><tt class="docutils literal"><span class="pre">description</span></tt> can be any further useful information about the project. This
is not used by LASIF but potentially useful for yourself.</li>
<li>The <tt class="docutils literal"><span class="pre">arclink_username</span></tt> tag should be your email. It will be send with all
requests to the ArcLink network. They ask for it in case they have to contact
you for whatever reason. Please provide a real email address. Must not be
empty.</li>
<li><tt class="docutils literal"><span class="pre">seconds_before_event</span></tt>: Used by the waveform download scripts. It will
attempt to download this many seconds for every waveform before the origin of
the associated event.</li>
<li><tt class="docutils literal"><span class="pre">seconds_after_event</span></tt>: Used by the waveform download scripts. It will
attempt to download this many seconds for every waveform after the origin of
the associated event. Adapt this to the size of your inversion domain.</li>
<li>The <tt class="docutils literal"><span class="pre">domain</span></tt> settings will be explained in more detail in the following
paragraphs.</li>
<li>The <tt class="docutils literal"><span class="pre">boundary_width_in_degree</span></tt> tag is use to be able to take care of the
boundary conditions, e.g. no data will be downloaded within
<tt class="docutils literal"><span class="pre">boundary_width_in_degree</span></tt> distance to the domain border.</li>
</ul>
<p>The nature of SES3D&#8217;s coordinate system has the effect that simulation is most
efficient in equatorial regions. Furthermore a domain can only be  specified by
minimum and maximum extends as it works with spherical sections.
Thus it is  oftentimes  advantageous to rotate the frame of reference so that
the simulation happens close to the equator. LASIF first defines the simulation
domain; the actual simulation happens here. Optional rotation parameters define
the physical location of the domain. The coordinate system for the rotation
parameters is described in <a class="reference internal" href="rotations.html#module-lasif.rotations" title="lasif.rotations"><tt class="xref py py-mod docutils literal"><span class="pre">lasif.rotations</span></tt></a>.  You will have to edit
the <tt class="docutils literal"><span class="pre">config.xml</span></tt> file to adjust it to your region of interest.</p>
<p>LASIF handles all rotations necessary so the user never needs to worry about
these. Just keep in mind to always keep any data (real waveforms, station
metadata and events) in coordinates that correspond to the physical domain and
all synthetic waveforms in coordinates that correspond to the simulation
domain.</p>
<p>For this tutorial we are going to work in a rotated domain across Europe.
Please change the <tt class="docutils literal"><span class="pre">config.xml</span></tt> file to reflect the following domain
settings.</p>
<ul class="simple">
<li>Latitude: <tt class="docutils literal"><span class="pre">-20.0°</span> <span class="pre">-</span> <span class="pre">20.0°</span></tt></li>
<li>Longitude: <tt class="docutils literal"><span class="pre">-20.0°</span> <span class="pre">-</span> <span class="pre">20.0°</span></tt></li>
<li>Depth: <tt class="docutils literal"><span class="pre">0</span> <span class="pre">km</span> <span class="pre">-</span> <span class="pre">1000</span> <span class="pre">km</span></tt></li>
<li>Boundary width in degree: <tt class="docutils literal"><span class="pre">3.00°</span></tt></li>
<li>Rotation axis: <tt class="docutils literal"><span class="pre">1.0,</span> <span class="pre">1.0,</span> <span class="pre">0.2</span></tt></li>
<li>Rotation angle: <tt class="docutils literal"><span class="pre">-65.0°</span></tt></li>
</ul>
<p>In general one should only work with data not affected by the boundary
conditions. SES3D utilizes perfectly matched layers boundary conditions (PML).
It is not advisable to use data that traverses these layers. The default
setting of SES3D is to use two boundary layers. In this example this amounts to
(in longitudinal direction) 1.46°. In a real world case it is best to use some
more buffer layers to avoid boundary effects. In this small example this would
influence the domain too much so we just set it to 1.46°.</p>
<p>At any point you can have a look at the defined domain with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_domain
</pre></div>
</div>
<p>This will open a window showing the location of the physical domain and the
simulation domain. The inner contour shows the domain minus the previously
defined boundary width.</p>
<p>(<a class="reference external" href=".//tutorial-1.py">Source code</a>, <a class="reference external" href=".//tutorial-1.png">png</a>, <a class="reference external" href=".//tutorial-1.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/tutorial-1.png" src="_images/tutorial-1.png" />
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The map projection and zoom should automatically adjust so it is suitable
for the dimensions and location of the chosen domain. If that is not the
case please file an issue on the project&#8217;s Github page.</p>
</div>
<p>Assuming you carefully followed this part the <tt class="docutils literal"><span class="pre">config.xml</span></tt> file should
look like this.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;lasif_project&gt;</span>
  <span class="nt">&lt;name&gt;</span>Tutorial<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
  <span class="nt">&lt;download_settings&gt;</span>
    <span class="nt">&lt;arclink_username&gt;&lt;/arclink_username&gt;</span>
    <span class="nt">&lt;seconds_before_event&gt;</span>300<span class="nt">&lt;/seconds_before_event&gt;</span>
    <span class="nt">&lt;seconds_after_event&gt;</span>3600<span class="nt">&lt;/seconds_after_event&gt;</span>
  <span class="nt">&lt;/download_settings&gt;</span>
  <span class="nt">&lt;domain&gt;</span>
    <span class="nt">&lt;domain_bounds&gt;</span>
      <span class="nt">&lt;minimum_longitude&gt;</span>-20<span class="nt">&lt;/minimum_longitude&gt;</span>
      <span class="nt">&lt;maximum_longitude&gt;</span>20<span class="nt">&lt;/maximum_longitude&gt;</span>
      <span class="nt">&lt;minimum_latitude&gt;</span>-20<span class="nt">&lt;/minimum_latitude&gt;</span>
      <span class="nt">&lt;maximum_latitude&gt;</span>20<span class="nt">&lt;/maximum_latitude&gt;</span>
      <span class="nt">&lt;minimum_depth_in_km&gt;</span>0.0<span class="nt">&lt;/minimum_depth_in_km&gt;</span>
      <span class="nt">&lt;maximum_depth_in_km&gt;</span>1000.0<span class="nt">&lt;/maximum_depth_in_km&gt;</span>
      <span class="nt">&lt;boundary_width_in_degree&gt;</span>3.0<span class="nt">&lt;/boundary_width_in_degree&gt;</span>
    <span class="nt">&lt;/domain_bounds&gt;</span>
    <span class="nt">&lt;domain_rotation&gt;</span>
      <span class="nt">&lt;rotation_axis_x&gt;</span>1.0<span class="nt">&lt;/rotation_axis_x&gt;</span>
      <span class="nt">&lt;rotation_axis_y&gt;</span>1.0<span class="nt">&lt;/rotation_axis_y&gt;</span>
      <span class="nt">&lt;rotation_axis_z&gt;</span>0.2<span class="nt">&lt;/rotation_axis_z&gt;</span>
      <span class="nt">&lt;rotation_angle_in_degree&gt;</span>-65.0<span class="nt">&lt;/rotation_angle_in_degree&gt;</span>
    <span class="nt">&lt;/domain_rotation&gt;</span>
  <span class="nt">&lt;/domain&gt;</span>
<span class="nt">&lt;/lasif_project&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-seismic-events">
<h2>Adding Seismic Events<a class="headerlink" href="#adding-seismic-events" title="Permalink to this headline">¶</a></h2>
<p>Once the domain has been adjusted to your needs, you need to tell <strong>LASIF</strong>
which events you want to use for the inversion. This works by simply placing a
valid QuakeML 1.2 file at the correct location.</p>
<p>All events have to be stored in the <tt class="docutils literal"><span class="pre">EVENTS</span></tt> subfolder of the project. They
have to be QuakeML 1.2 files with full moment tensor information.</p>
<p>LASIF provides some convenience methods for this purpose. One can leverage the
<a class="reference external" href="http://www.iris.edu/spud/momenttensor">IRIS SPUD service</a> to get GlobalCMT
events.  Simply search for an event on their webpage and copy the event url.
The <tt class="docutils literal"><span class="pre">lasif</span> <span class="pre">add_spud_event</span></tt> command will then grab the QuakeML from the url
and store an XML file in the correct folder.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif add_spud_event http://www.iris.edu/spud/momenttensor/835040
<span class="nv">$ </span>lasif add_spud_event http://www.iris.edu/spud/momenttensor/834535
</pre></div>
</div>
<p>These commands will download two event files and store them in the
<tt class="docutils literal"><span class="pre">EVENTS</span></tt> subfolder.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls EVENTS

GCMT_event_NORTHWESTERN_BALKAN_REGION_Mag_5.9_1980-5-18-20-2.xml
GCMT_event_PYRENEES_Mag_5.1_1980-2-29-20-40.xml
</pre></div>
</div>
<p>A more convenient way to see which events are currently defined in the
project is the <tt class="docutils literal"><span class="pre">lasif</span> <span class="pre">list_events</span></tt> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif list_events

2 events in project:
+--------------------------------------------------------------+-----------------------------+---------------------+
| Event Name                                                   |    Lat/Lng/Depth<span class="o">(</span>km<span class="o">)</span>/Mag    | <span class="c"># raw/preproc/synth |</span>
+--------------------------------------------------------------+-----------------------------+---------------------+
| GCMT_event_NORTHWESTERN_BALKAN_REGION_Mag_5.9_1980-5-18-20-2 |   43.3 /   20.8 /   9 / 5.9 |    0 /     0 /    0 |
| GCMT_event_PYRENEES_Mag_5.1_1980-2-29-20-40                  |   43.3 /   -0.3 /  10 / 5.1 |    0 /     0 /    0 |
+--------------------------------------------------------------+-----------------------------+---------------------+
</pre></div>
</div>
<p>You will notice that events are identified via their filename minus the
extension. This is an easy and flexible solution enabling you to tag the events
as you see fit. The slight disadvantage of this approach is that <strong>you must not
change the event filenames after you have worked with them</strong> because all
additional information for that event will be related to it via the event
filename. So please give them a good and reasonable filename. If you really
feel that event renaming is a necessary feature please file an issue on Github
so that the authors can add a proper event renaming function.</p>
<p>The <tt class="docutils literal"><span class="pre">lasif</span> <span class="pre">plot_events</span></tt> command will show a map with all events currently
part of the project.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_events
</pre></div>
</div>
<p>(<a class="reference external" href=".//tutorial-2.py">Source code</a>, <a class="reference external" href=".//tutorial-2.png">png</a>, <a class="reference external" href=".//tutorial-2.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/tutorial-2.png" src="_images/tutorial-2.png" />
</div>
<p>The <tt class="docutils literal"><span class="pre">lasif</span> <span class="pre">event_info</span></tt> command is your friend if you desire more  information
about a certain event:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif event_info GCMT_event_PYRENEES_Mag_5.1_1980-2-29-20-40

Earthquake with 5.1 Mwc at PYRENEES
    Latitude: 43.260, Longitude: -0.340, Depth: 10.0 km
    1980-02-29T20:40:48.500000Z UTC
...
</pre></div>
</div>
<p>The information given with this command will be the one LASIF uses. This is
useful if the event has more then one origin and you want to know which one
LASIF actually uses. Notice that the event currently has no data associated
with it. We will fix this in the next section.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You do not need to add all events you plan to use in the inversion at the
beginning. Only add those you want to use for the very first inversion.
LASIF is rather flexible and enables you to use different events, data,
weighting schemes, ... for every iteration. It will keep track of what
actually happened during each iteration so the project gains
<strong>reproducibility and provenance</strong>.</p>
</div>
</div>
<div class="section" id="adding-waveform-data">
<h2>Adding Waveform Data<a class="headerlink" href="#adding-waveform-data" title="Permalink to this headline">¶</a></h2>
<p>Every inversion needs real data to be able to quantify misfits. The waveform
data for all events are stored in the <em>DATA</em> subfolder. The data for each
single event will be stored in a subfolder of the <em>DATA</em> folder with the
<strong>same name as the QuakeML file minus the .xml</strong>.</p>
<p>These folder are automatically created and updated each time a lasif command is
executed. If you followed the tutorial, your directory structure should
resemble the following:</p>
<div class="highlight-python"><div class="highlight"><pre>TutorialAnatolia
|── ADJOINT_SOURCES_AND_WINDOWS
|   |── ADJOINT_SOURCES
|   |── WINDOWS
|── CACHE
|── config.xml
|── DATA
|   |── GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
|   |── GCMT_event_TURKEY_Mag_5.9_2011-5-19-20-15
|── EVENTS
|   |── GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11.xml
|   |── GCMT_event_TURKEY_Mag_5.9_2011-5-19-20-15.xml
|── ITERATIONS
|── LOGS
|── MODELS
|── OUTPUT
|── STATIONS
|   |── RESP
|   |── SEED
|   |── StationXML
|── SYNTHETICS
    |── GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
    |── GCMT_event_TURKEY_Mag_5.9_2011-5-19-20-15
</pre></div>
</div>
<p>All data in the <em>DATA</em> subfolder has to be processed or unprocessed actual
data. The data is further structured by assigning a tag to every data set. A
tag is assigned by simply placing a folder in <em>ROOT/DATA/EVENT_NAME</em> and
putting all data in there. The special tag <em>raw</em> is reserved for the raw
waveforms straight from the datacenters or some other source. Other tags should
describe the filtering and processing applied to the data (LASIF&#8217;s built-in
processing capabilities actually enforce certain tag names - this will be
covered in more detail later on). The same is true for synthetic waveform data,
except that in that case, the data resides in the <em>SYNTHETICS</em> folder and the
tags have to coincide with the iteration names. More on this later on.</p>
<p>After a while, the structure might look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>TutorialAnatolia
|-- DATA
    |── GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
        |-- raw
        |-- preprocessed_hp_0.01000_lp_0.12500_npts_4000_dt_0.130000
    |...
|-- SYNTHETICS
    |── GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
        |-- inversion_1
        |-- inversion_2
        |...
    |...
|...
</pre></div>
</div>
<p><strong>The user is responsible</strong> for adhering to that structure. Otherwise other
parts of LASIF cannot operate properly. Many commands shipping with LASIF ease
that process.</p>
</div>
<div class="section" id="station-data">
<h2>Station Data<a class="headerlink" href="#station-data" title="Permalink to this headline">¶</a></h2>
<p>LASIF needs to know the coordinates and instrument response of each channel.
One way to achieve this to use SAC files, which contain coordinates, and RESP
files containing the response information for each channel. Another possibility
is to use MiniSEED waveform data and the corresponding dataless SEED or
StationXML files. Please keep in mind that LASIF currently expects to only
have channels of one station in each dataless SEED and StationXML file.</p>
<div class="section" id="naming-scheme">
<h3>Naming scheme<a class="headerlink" href="#naming-scheme" title="Permalink to this headline">¶</a></h3>
<p><strong>dataless SEED</strong></p>
<p>All dataless SEED files are expected to be in the <em>STATIONS/SEED</em> directory and
be named after the following scheme:</p>
<div class="highlight-python"><div class="highlight"><pre>dataless.NETWORK_STATION[.X]
</pre></div>
</div>
<p><em>NETWORK</em>, and <em>STATION</em> should be replaced with the corresponding network and
stations codes. It is possible that multiple files are needed for each station
(e.g. different files for different time intervals/channels) and thus <em>.1</em>,
<em>.2</em>, ... can be appended to the filename. LASIF will automatically choose
the correct file in case they need to be accessed.</p>
<p><strong>StationXML</strong></p>
<p>All StationXML files are expected to be placed in the <em>STATIONS/StationXML</em>
folder and following the scheme:</p>
<div class="highlight-python"><div class="highlight"><pre>station.NETWORK_STATION[.X].xml
</pre></div>
</div>
<p>The logic for for the different parts is the same as for the dataless SEED
files described in the previous paragraph.</p>
<p><strong>RESP Files</strong></p>
<p>All RESP files are to be put in the <em>STATIONS/RESP</em> folder with the following
name:</p>
<div class="highlight-python"><div class="highlight"><pre>RESP.NETWORK.STATION.LOCATION.CHANNEL[.X]
</pre></div>
</div>
<p>In contrast to the two other station information formats the RESP filename also
has to include the location and channel identifiers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The automatic download routines included in LASIF are sometimes not able to
find stations files. IRIS as well as Orfeus have FTP servers with anonymous
access that potentially provide missing station files:</p>
<ul class="simple">
<li><a class="reference external" href="ftp://www.orfeus-eu.org/pub/data/metadata">ftp://www.orfeus-eu.org/pub/data/metadata</a></li>
<li><a class="reference external" href="http://www.iris.edu/pub/RESPONSES/">http://www.iris.edu/pub/RESPONSES/</a></li>
</ul>
<p class="last">Just make sure to adhere to the naming scheme imposed by LASIF.</p>
</div>
</div>
</div>
<div class="section" id="download-helpers">
<h2>Download Helpers<a class="headerlink" href="#download-helpers" title="Permalink to this headline">¶</a></h2>
<p>LASIF comes with a collection of scripts that help downloading waveform and
station data from the IRIS and ArcLink services. Waveform data will always be
downloaded as MiniSEED. Station data will, due to the different products of the
dataservices, either be downloaded as StationXML (IRIS) or dataless SEED.
Furthermore, as many tools so far are not able to deal with StationXML data,
the RESP files for each channel will also be downloaded. This is redundant
information but enables the use of many tools otherwise not possible.</p>
<div class="section" id="downloading-waveforms">
<h3>Downloading Waveforms<a class="headerlink" href="#downloading-waveforms" title="Permalink to this headline">¶</a></h3>
<p>Waveforms are downloaded on a per event basis. The <strong>config.xml</strong> file contains
some specification to detail the download.</p>
<p>To download the waveform data for one event, choose one and run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif download_waveforms GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
</pre></div>
</div>
<p>The command essentially just tries to download everything it can. It queries
the IRIS DMC and ArcLink for all stations available in the physical domain and
then downloads the appropriate data. It accounts for the domain borders and
possible domain rotations. It is influences by three parameters in the
<strong>config.xml</strong> file:</p>
<ul class="simple">
<li>The <em>arclink_username</em> tag should be your email. It will be send with all
requests to the ArcLink network. They ask for it in case they have to contact
you for whatever reason. Please provide a real email address. Must not be
empty.</li>
<li><em>seconds_before_event</em>: Used by the waveform download scripts. It will
attempt to download this many seconds for every waveform before the origin of
the associated event.</li>
<li><em>seconds_after_event</em>: Used by the waveform download scripts. It will attempt
to download this many seconds for every waveform after the origin of the
associated event. Adapt this to the size of your inversion domain.</li>
</ul>
<p>This, dependent on the domain size, event location, and origin time can take a
while. Executing the same command again will only attempt to download data not
already present. All data will be placed in <cite>DATA/EVENT_NAME/raw</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At this point it is worth mentioning that LASIF keeps logs of many actions
that the user performs. All logs will be saved in the <em>LOGS</em> subfolder.</p>
</div>
</div>
<div class="section" id="downloading-station-metadata">
<h3>Downloading Station Metadata<a class="headerlink" href="#downloading-station-metadata" title="Permalink to this headline">¶</a></h3>
<p>LASIF also includes some functionality to download station metadata. It will,
download RESP files from IRIS and dataless SEED files from ArcLink. It works
the same as it does for the waveforms. To download all stations for one event
simply execute</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif download_stations GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
</pre></div>
</div>
<p>The <cite>lasif download_stations</cite> command will, for the specified event, figure
what waveform data is present in the <cite>DATA/EVENT_NAME/raw</cite> folder and download
all missing station metadata information for these files.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At some point in the near future the station metadata downloading routines
will be changed so that they exclusively work with StationXML metadata.</p>
</div>
</div>
</div>
<div class="section" id="inspecting-the-data">
<h2>Inspecting the Data<a class="headerlink" href="#inspecting-the-data" title="Permalink to this headline">¶</a></h2>
<p>Once waveform and station metadata has been downloaded (either with the
built-in helpers or manually) and placed in the correct folders, LASIF can
start to work with it.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>LASIF essentially needs three ingredients to be able to interpret waveform
data:</p>
<ul class="simple">
<li>The actual waveforms</li>
<li>The location of the recording seismometer</li>
<li>The instrument response for each channel at the time of data recording</li>
</ul>
<p>Some possibilities exist to specify these:</p>
<ul class="simple">
<li>MiniSEED data and dataless SEED for the metadata (currently preferred)</li>
<li>SAC data and RESP files (needed for legacy reasons)</li>
<li>MiniSEED and RESP files (this combination does not actually contain
location information but LASIF launches some web requests to get just the
locations and stores them in a cache database)</li>
<li>Most other combinations should also work but have not been tested.</li>
</ul>
<p class="last">In the future the preferred way will be miniSEED data combined with
StationXML metadata. This provides a clear seperation of data and metadata.</p>
</div>
<p>At this point, LASIF is able to match available station and waveform
information. Only stations where the three aforementioned ingredients are
available will be considered to be stations that are good to be worked with by
LASIF. Others will be ignored.</p>
<p>To get an overview, of what data is actually available for any given event,
just execute:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif event_info GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11

Earthquake with 5.1 Mwc at TURKEY
    Latitude: 38.820, Longitude: 40.140, Depth: 4.5 km
    2010-03-24T14:11:31.000000Z UTC

Station and waveform information available at 8 stations:

<span class="o">===========================================================================</span>
             id       latitude      longitude      elevation    <span class="nb">local </span><span class="nv">depth</span>
<span class="o">===========================================================================</span>
         GE.APE        37.0689        25.5306          620.0            0.0
         GE.ISP        37.8433        30.5093         1100.0            5.0
         HL.APE        37.0689        25.5306          620.0            0.0
         HL.ARG         36.216         28.126          170.0            0.0
         HL.RDO         41.146         25.538          100.0            0.0
         HT.ALN        40.8957        26.0497          110.0            0.0
        HT.SIGR        39.2114        25.8553           93.0            0.0
        IU.ANTO         39.868        32.7934         1090.0           None
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As seen here, the local depth can is allowed to not be set. In this cases
it will be assumed to be zero. For all practical purposes the local depth
does not matter for continental scale inversions.</p>
</div>
<p>It is furthermore possible to plot the availability information for one event
including a very simple ray coverage plot with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_event GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
</pre></div>
</div>
<p>(<a class="reference external" href=".//tutorial-3.py">Source code</a>, <a class="reference external" href=".//tutorial-3.png">png</a>, <a class="reference external" href=".//tutorial-3.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/tutorial-3.png" src="_images/tutorial-3.png" />
</div>
<p>If you are interested in getting a coverage plot of all events and data
available for the current project, please execute the <strong>plot_raydensity</strong>
command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_raydensity
</pre></div>
</div>
<p>Keep in mind that this only results in a reasonable plot for large amounts of
data; for the toy example used in the tutorial it will not work. It is not a
physically accurate plot but helps in judging data coverage and directionality
effects. An example from a larger LASIF project illustrates this:</p>
<a class="reference internal image-reference" href="_images/raydensity.jpg"><img alt="_images/raydensity.jpg" class="align-center" src="_images/raydensity.jpg" style="width: 70%;" /></a>
</div>
<div class="section" id="interlude-validating-the-data">
<h2>Interlude: Validating the data<a class="headerlink" href="#interlude-validating-the-data" title="Permalink to this headline">¶</a></h2>
<p>You might have noticed that LASIF projects can potentially contain many million
files and it will thus be impossible to validate the data by hand. Therefore
LASIF contains a number of functions attempting to check the data of a
project. All of these can be called with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif validate_data
</pre></div>
</div>
<p>Please make sure no errors appear otherwise LASIF cannot guarantee to work
correctly.  With time more checks will be added to this function as more
problems arise.</p>
<p>This command will output an oftentimes very large report. All problems
indicated in it should be solved to ensure LASIF can operate correctly. The
best strategy to it is to start at the very beginning of the file. Oftentimes
some errors are due to others and the <em>validate_data</em> command tries to be smart
and checks for simple errors first. Per default the command will launch only a
simplified validation function as some tests are rather slow. To get a full
validation going use</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif validate_data --full
</pre></div>
</div>
<p>Be aware that this may take a while.</p>
</div>
<div class="section" id="defining-a-new-iteration">
<h2>Defining a New Iteration<a class="headerlink" href="#defining-a-new-iteration" title="Permalink to this headline">¶</a></h2>
<p>LASIF organizes the actual inversion in an arbitrary number of iterations; each
of which is described by a single XML file. Within each file, the events and
stations for this iterations, the solver settings, and other information is
specified. Each iteration can have an arbitrary name. It is probably a good
idea to give simple numeric names, like 1, 2, 3, ...</p>
<p>Let&#8217;s start by creating the XML file for the very first iteration with the
<strong>create_new_iteration</strong> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif create_new_iteration 1 8.0 100.0 SES3D_4_0
</pre></div>
</div>
<p>This command takes four arguments; the first being the iteration name. A simple
number is sufficient in many cases. The second and third denote the band limit
of this iteration. In this example the band is limited between 8 and 100
seconds. The fourth argument is the waveform solver to be used for this
iteration. It currently only supports SES3D 4.0 but the infrastructure to add
other solvers is already in place.</p>
<p>You will see that this create a new file; <em>ITERATIONS/ITERATION_1.xml*</em>. Each
iteration will have its own file. To get a list of iterations, use</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif list_iterations

1 Iteration in project:
    1
</pre></div>
</div>
<p>To get more information about a specific iteration, use the <strong>iteration_info</strong> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif iteration_info 1

LASIF Iteration
    Name: 1
    Description: None
    Source Time Function: Filtered Heaviside
    Preprocessing Settings:
            Highpass Period: 100.000 s
            Lowpass Period: 8.000 s
    Solver: SES3D 4.0 | 500 timesteps <span class="o">(</span>dt: 0.75s<span class="o">)</span>
    2 events recorded at 10 unique stations
    16 event-station pairs <span class="o">(</span><span class="s2">&quot;rays&quot;</span><span class="o">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You might have noticed the pairs of <strong>list_x</strong> and <strong>x_info</strong> commands, e.g.
<strong>list_events</strong> and <strong>event_info</strong> or <strong>list_iterations</strong> and
<strong>iteration_info</strong>. This scheme is true for most things in LASIF. The
<strong>list_x</strong> variant is always used to get a quick overview of everything
currently part of the LASIF project. The <strong>x_info</strong> counterpart returns
more detailed information about the resource.</p>
</div>
<div class="section" id="the-iteration-xml-files">
<h3>The Iteration XML Files<a class="headerlink" href="#the-iteration-xml-files" title="Permalink to this headline">¶</a></h3>
<p>The XML file defining each iteration attempts to be a collection of all
information relevant for a single iteration.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The iteration XML files are the <strong>main provenance information</strong> (in
combination with the log files) within LASIF. By keeping track of what
happened during each iteration it is possible to reasonably judge how any
model came into being.</p>
<p class="last">If at any point you feel the need to keep track of additional information
and there is no place for it within LASIF, please contact the developers.
LASIF aims to offer an environment where all necessary information can be
stored in an organized and sane manner.</p>
</div>
<p>The iteration XML files currently contain:</p>
<ul class="simple">
<li>Some metadata: the iteration name, a description and some comments.</li>
<li>A limited data preprocessing configuration. The data preprocessing is
currently mostly fixed and only the desired frequency content can be chosen.
Keep in mind that these values will also be used to filter the source time
function.</li>
<li>Some data rejection criterias. This will be covered in more detail later on.</li>
<li>The source time function configuration.</li>
<li>The settings for the solver used for this iteration.</li>
<li>A list of all events used for the iteration. Here it is possible to apply
weight the different events and also to apply a time correction. It can be
different per iteration.</li>
<li>Each event contains a list of stations where data is available. Furthermore
each station can have a different weight and time correction.</li>
</ul>
<p>This file is rather verbose but also very flexible. It is usually only
necessary to create this file once and then make a copy and small adjustments
for each iteration. In the future some more user-friendly ways to deal with the
information will hopefully be incorporated into LASIF.</p>
<p>Let&#8217;s have a quick look at the generated file. The <strong>create_new_iteration</strong>
command will create a new iteration file with all the information currently
present in the LASIF project.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;iteration&gt;</span>
  <span class="nt">&lt;iteration_name&gt;</span>1<span class="nt">&lt;/iteration_name&gt;</span>
  <span class="nt">&lt;iteration_description&gt;</span>The first iteration<span class="nt">&lt;/iteration_description&gt;</span>
  <span class="nt">&lt;comment&gt;</span>This is just for the dummy tutorial example<span class="nt">&lt;/comment&gt;</span>
  <span class="nt">&lt;comment&gt;</span>There can be an arbitrary number of comments<span class="nt">&lt;/comment&gt;</span>
  <span class="nt">&lt;data_preprocessing&gt;</span>
    <span class="nt">&lt;highpass_period&gt;</span>100.0<span class="nt">&lt;/highpass_period&gt;</span>
    <span class="nt">&lt;lowpass_period&gt;</span>8.0<span class="nt">&lt;/lowpass_period&gt;</span>
  <span class="nt">&lt;/data_preprocessing&gt;</span>
  <span class="nt">&lt;rejection_criteria&gt;</span>
    ...
  <span class="nt">&lt;/rejection_criteria&gt;</span>
  <span class="nt">&lt;source_time_function&gt;</span>Filtered Heaviside<span class="nt">&lt;/source_time_function&gt;</span>
  <span class="nt">&lt;solver_parameters&gt;</span>
    <span class="nt">&lt;solver&gt;</span>SES3D 4.0<span class="nt">&lt;/solver&gt;</span>
    <span class="nt">&lt;solver_settings&gt;</span>
      <span class="nt">&lt;simulation_parameters&gt;</span>
        <span class="nt">&lt;number_of_time_steps&gt;</span>4000<span class="nt">&lt;/number_of_time_steps&gt;</span>
        <span class="nt">&lt;time_increment&gt;</span>0.13<span class="nt">&lt;/time_increment&gt;</span>
        <span class="nt">&lt;is_dissipative&gt;</span>false<span class="nt">&lt;/is_dissipative&gt;</span>
      <span class="nt">&lt;/simulation_parameters&gt;</span>
      <span class="nt">&lt;output_directory&gt;</span>../OUTPUT/CHANGE_ME/{{EVENT_NAME}}<span class="nt">&lt;/output_directory&gt;</span>
      ...
    <span class="nt">&lt;/solver_settings&gt;</span>
  <span class="nt">&lt;/solver_parameters&gt;</span>
  <span class="nt">&lt;event&gt;</span>
    <span class="nt">&lt;event_name&gt;</span>GCMT_event_TURKEY_Mag_5.9_2011-5-19-20-15<span class="nt">&lt;/event_name&gt;</span>
    <span class="nt">&lt;event_weight&gt;</span>1.0<span class="nt">&lt;/event_weight&gt;</span>
    <span class="nt">&lt;time_correction_in_s&gt;</span>0.0<span class="nt">&lt;/time_correction_in_s&gt;</span>
    <span class="nt">&lt;station&gt;</span>
      <span class="nt">&lt;station_id&gt;</span>HL.ARG<span class="nt">&lt;/station_id&gt;</span>
      <span class="nt">&lt;station_weight&gt;</span>1.0<span class="nt">&lt;/station_weight&gt;</span>
      <span class="nt">&lt;time_correction_in_s&gt;</span>0.0<span class="nt">&lt;/time_correction_in_s&gt;</span>
    <span class="nt">&lt;/station&gt;</span>
    <span class="nt">&lt;station&gt;</span>
      <span class="nt">&lt;station_id&gt;</span>IU.ANTO<span class="nt">&lt;/station_id&gt;</span>
      <span class="nt">&lt;station_weight&gt;</span>1.0<span class="nt">&lt;/station_weight&gt;</span>
      <span class="nt">&lt;time_correction_in_s&gt;</span>0.0<span class="nt">&lt;/time_correction_in_s&gt;</span>
    <span class="nt">&lt;/station&gt;</span>
    ...
  <span class="nt">&lt;/event&gt;</span>
  <span class="nt">&lt;event&gt;</span>
    ...
  <span class="nt">&lt;/event&gt;</span>
  ...
<span class="nt">&lt;/iteration&gt;</span>
</pre></div>
</div>
<p>It is a rather self-explaining file; some things to look out for:</p>
<ul class="simple">
<li>The dataprocessing frequency limits are given periods in seconds. This is
more in line what one would normally use.</li>
<li>The source time function is just given as a string. The &#8220;Filtered Heaviside&#8221;
is the only source time function currently supported. It will be filtered
with the limits specified in the data preprocessing section.</li>
<li>The paths in the solver settings contains an <strong>{{EVENT_NAME}}</strong> part. This
part will be replaced by the actual event name. This means that the file does
not have to be adjusted for every event.</li>
</ul>
<p>The file shown here has already be adjusted to be consistent with the SES3D
example. Please do the same here. Notably you have to adjust the number of time
steps and the time increment. Furthermore the paths have to be adjusted so that
they for the system you plan to run the simulations on.</p>
</div>
<div class="section" id="source-time-functions">
<h3>Source Time Functions<a class="headerlink" href="#source-time-functions" title="Permalink to this headline">¶</a></h3>
<p>The source time functions will be dynamically generated from the information
specified in the iteration XML files. Currently only one type of source time
function, a filtered Heaviside function is supported. In the future, if
desired, it could also be possible to use inverted source time functions.</p>
<p>The source time function will always be defined for the number of time steps
and time increment you specify in the solver settings. Furthermore all source
time functions will be filtered with the same bandpass as the data.</p>
<p>To get a quick look of the source time function for any given iteration, use
the <strong>plot_stf</strong> command with the iteration name:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_stf 1
</pre></div>
</div>
<p>This command will read the corresponding iteration file and open a plot with a
time series and a time frequency representation of the source time function.</p>
<p>(<a class="reference external" href=".//tutorial-4.py">Source code</a>, <a class="reference external" href=".//tutorial-4.png">png</a>, <a class="reference external" href=".//tutorial-4.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial-4.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/tutorial-4.png" src="_images/tutorial-4.png" />
</div>
</div>
<div class="section" id="attenuation">
<h3>Attenuation<a class="headerlink" href="#attenuation" title="Permalink to this headline">¶</a></h3>
<p>SES3D models attenuation with a discrete superposition of a finite number of
relaxation mechanisms. The goal is to achieve a constant Q model over the
chosen frequency range. Upon creating an iteration, LASIF will run a non-linear
optimization algorithm to find relaxation times and associated weights that
will be nearly constant over the chosen frequency domain.</p>
<p>At any point you can see the absorption-band model for a given iteration at a
couple of exemplary Q values with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_Q_model 1
</pre></div>
</div>
<p>The single argument is the name of the iteration.</p>
<p>(<a class="reference external" href=".//tutorial-5.py">Source code</a>, <a class="reference external" href=".//tutorial-5.png">png</a>, <a class="reference external" href=".//tutorial-5.hires.png">hires.png</a>, <a class="reference external" href=".//tutorial-5.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/tutorial-5.png" src="_images/tutorial-5.png" />
</div>
<p>The two vertical lines in each plot mark the frequency range as specified in
the iteration XML file.</p>
<p>It is also possible to directly generate the relaxation times and weights for
any frequency band. To generate a Q model approximately constant in a period
band from 10 seconds to 100 seconds use</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif calculate_constant_Q_model 10 100

Weights: 2.51476795756, 2.45723765861, 0.0554802992816
Relaxation Times: 2.51476795756, 2.45723765861, 0.0554802992816
</pre></div>
</div>
</div>
<div class="section" id="data-preprocessing">
<h3>Data Preprocessing<a class="headerlink" href="#data-preprocessing" title="Permalink to this headline">¶</a></h3>
<p>Data preprocessing is an essential step if one wants to compare data and
seismograms. It serves several purposes: Restricting the frequency content of
the data to that of the synthetics - what is not simulated can no be seen in
synthetic seismograms. Remove the instrument response and convert to the same
units used for the synthetics (usually ms). Furthermore any linear trends and
static offset are removed and the some processing has to be performed so that
the data is available at the same points in time as the synthetics. The goal of
the preprocessing within LASIF is to create data that is directly comparable to
simulated data without any more processing.</p>
<p>The applied processing is identified via the folder name:</p>
<div class="highlight-python"><div class="highlight"><pre>preprocessed_hp_0.01000_lp_0.12500_npts_4000_dt_0.130000
</pre></div>
</div>
<p>or (in Python terms):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">highpass</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">100.0</span>
<span class="n">lowpass</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">8.0</span>
<span class="n">npts</span> <span class="o">=</span> <span class="mi">4000</span>
<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.13</span>

<span class="n">processing_tag</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;preprocessed_hp_{highpass:.5f}_lp_{lowpass:.5f}_&quot;</span>
    <span class="s">&quot;npts_{npts}_dt_{dt:5f}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">highpass</span><span class="o">=</span><span class="n">highpass</span><span class="p">,</span> <span class="n">lowpass</span><span class="o">=</span><span class="n">lowpass</span><span class="p">,</span>
    <span class="n">npts</span><span class="o">=</span><span class="n">npts</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="n">dt</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You can use any processing tool you want, but you have to adhere to the
directory structure otherwise LASIF will not be able to work with the data.
It is furthermore important that the processed filenames are identical to
the unprocessed ones.</p>
<p class="last">If you feel that additional identifiers are needed to uniquely identify the
applied processing (in the limited setting of being useful for the here
performed full waveform inversion) please contact the LASIF developers.</p>
</div>
<p>You can of course also simply utilize LASIF&#8217;s built-in preprocessing. Using it
is trivial, just launch the <strong>preprocess_data</strong> command together with the
iteration name.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif preprocess_data 1
</pre></div>
</div>
<p>This will start a fully parallelized preprocessing for all data required for
the specified iteration. It will utilize all your machine&#8217;s cores and might
take a while. If you repeat the command it will only process data not already
processed; an advantages is that you can cancel the processing at any time and
then later on just execute the command again to continue where you left off.
This usually only needs to be done every couple of iterations when you decide
to go to higher frequencies or add new data.</p>
<p>The preprocessed data will be put in the correct folder.</p>
</div>
<div class="section" id="data-rejection">
<h3>Data Rejection<a class="headerlink" href="#data-rejection" title="Permalink to this headline">¶</a></h3>
<p>Coming soon...watch this space.</p>
<p>This concludes the initial setup for each iteration. The next steps is to
actually simulate anything and LASIF of course also assists in that regard.</p>
</div>
</div>
<div class="section" id="generating-ses3d-input-files">
<h2>Generating SES3D Input Files<a class="headerlink" href="#generating-ses3d-input-files" title="Permalink to this headline">¶</a></h2>
<p>LASIF is currently capable of producing input files for SES3D 4.0. It is very
straightforward and knows what data is available for every event and thus can
generate these files fully automatically. In the future it might be worth
investigating automatic job submission to high performance machines as this is
essentially just repetitive and error-prone work.</p>
<p>The iteration XML file also governs the solver used and the specific settings
used for the given iteration, e.g. the settings for the SES3D 4.0 solver are
shown here.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;solver_parameters&gt;</span>
  <span class="nt">&lt;solver&gt;</span>SES3D 4.0<span class="nt">&lt;/solver&gt;</span>
  <span class="nt">&lt;solver_settings&gt;</span>
    <span class="nt">&lt;simulation_parameters&gt;</span>
      <span class="nt">&lt;number_of_time_steps&gt;</span>4000<span class="nt">&lt;/number_of_time_steps&gt;</span>
      <span class="nt">&lt;time_increment&gt;</span>0.13<span class="nt">&lt;/time_increment&gt;</span>
      <span class="nt">&lt;is_dissipative&gt;</span>false<span class="nt">&lt;/is_dissipative&gt;</span>
    <span class="nt">&lt;/simulation_parameters&gt;</span>
    <span class="nt">&lt;output_directory&gt;</span>../OUTPUT/CHANGE_ME/{{EVENT_NAME}}<span class="nt">&lt;/output_directory&gt;</span>
    <span class="nt">&lt;adjoint_output_parameters&gt;</span>
      <span class="nt">&lt;sampling_rate_of_forward_field&gt;</span>10<span class="nt">&lt;/sampling_rate_of_forward_field&gt;</span>
      <span class="nt">&lt;forward_field_output_directory&gt;</span>
          ../OUTPUT/CHANGE_ME/ADJOINT/{{EVENT_NAME}}
      <span class="nt">&lt;/forward_field_output_directory&gt;</span>
    <span class="nt">&lt;/adjoint_output_parameters&gt;</span>
    <span class="nt">&lt;computational_setup&gt;</span>
      <span class="nt">&lt;nx_global&gt;</span>66<span class="nt">&lt;/nx_global&gt;</span>
      <span class="nt">&lt;ny_global&gt;</span>108<span class="nt">&lt;/ny_global&gt;</span>
      <span class="nt">&lt;nz_global&gt;</span>28<span class="nt">&lt;/nz_global&gt;</span>
      <span class="nt">&lt;lagrange_polynomial_degree&gt;</span>4<span class="nt">&lt;/lagrange_polynomial_degree&gt;</span>
      <span class="nt">&lt;px_processors_in_theta_direction&gt;</span>3<span class="nt">&lt;/px_processors_in_theta_direction&gt;</span>
      <span class="nt">&lt;py_processors_in_phi_direction&gt;</span>4<span class="nt">&lt;/py_processors_in_phi_direction&gt;</span>
      <span class="nt">&lt;pz_processors_in_r_direction&gt;</span>4<span class="nt">&lt;/pz_processors_in_r_direction&gt;</span>
    <span class="nt">&lt;/computational_setup&gt;</span>
  <span class="nt">&lt;/solver_settings&gt;</span>
<span class="nt">&lt;/solver_parameters&gt;</span>
</pre></div>
</div>
<p>Most things should be self-explanatory.  In case something is not fully clear,
please refer to the SES3D 4.0 manual or contact the author. As previously
mentioned the <strong>{{EVENT_NAME}}</strong> placeholder will be replaced with the actual
event. Please take care that what you put in here it correct, otherwise the
simulations will not work. The settings shown here coincide with the settings
used in the SES3D 4.0 tutorial so we will just use those here.</p>
<div class="section" id="input-file-generation">
<h3>Input File Generation<a class="headerlink" href="#input-file-generation" title="Permalink to this headline">¶</a></h3>
<p>The actual input file generation is now very straightforward:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif generate_input_files ITERATION_NAME EVENT_NAME --simulation_type<span class="o">=</span>SIMULATION_TYPE
</pre></div>
</div>
<p><strong>TYPE</strong> has to be one of</p>
<blockquote>
<div><ul class="simple">
<li><em>normal_simulation</em> - Use this if you want to get some waveforms.</li>
<li><em>adjoint_forward</em> - Use this for the forward adjoint simulation. Please
note that it requires a huge amount of disk space for the forward
wavefield.</li>
<li><em>adjoint_reverse</em> - Use this for the adjoint simulation. This requires
that the adjoint sources have already been calculated. More on that later
on.</li>
</ul>
</div></blockquote>
<p>The other parameters should be clear.</p>
<p>For this tutorial you can generate input files for both events with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif generate_input_files 1 GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11 --simulation_type<span class="o">=</span>adjoint_forward
<span class="nv">$ </span>lasif generate_input_files 1 GCMT_event_TURKEY_Mag_5.9_2011-5-19-20-15 --simulation_type<span class="o">=</span>adjoint_forward
</pre></div>
</div>
<p>This will place input files in the <em>OUTPUT</em> subdirectory of the project. In
general it is advisable to never delete the input files to facilitate
provenance and reproducibility.</p>
<p>If you are working in a rotated domain, all station coordinates and moment
tensors will automatically be rotated accordingly so that the actual simulation
can take place in an unrotated frame of reference.</p>
<p>Together with some models, these file can directly be used to run SES3D. For
the first couple of runs it is likely a good idea to check these file by hand
to verify your setup and potentially also the correctness of this tool suite.</p>
</div>
</div>
<div class="section" id="organizing-the-models">
<h2>Organizing the Models<a class="headerlink" href="#organizing-the-models" title="Permalink to this headline">¶</a></h2>
<div class="section" id="short-deviation-creating-an-initial-model-with-ses3d-4-0">
<h3>Short Deviation: Creating an initial model with SES3D 4.0<a class="headerlink" href="#short-deviation-creating-an-initial-model-with-ses3d-4-0" title="Permalink to this headline">¶</a></h3>
<p>This is very quick tutorial to help you get up to speed with the model
generation for this tutorial with SES3D 4.0. You will still need to read the
SES3D manual. This part assumes that you created the input files according to
the previous section and that you have a copy of SES3D on the supercomputer.
Please not that you will have to adjust settings if you did not follow along
with the tutorial. The following has to take place on a machine with at least
48 available CPU cores.</p>
<ol class="arabic simple">
<li>Copy all generated input files to <em>SES3D/INPUT</em>.</li>
<li>Edit <em>nx_max</em>, <em>ny_max</em>, <em>nz_max</em> in <em>SES3D/SOURCE/ses3d_modules.f90</em></li>
<li>Compile SES3D and model tools (execute <em>s_make</em> in <em>SES3D/MODELS/MODELS</em> and
<em>SOURCE</em>).</li>
<li>Generate a homogeneous model by launching
<em>SES3D/MODELS/MAIN/generate_models.exe</em> with 48 cores.</li>
<li>Now add some perturbations to get a 3D model by running
<em>SES3D/MODELS/MAIN/add_perturbation.exe</em> with 48 cores.</li>
</ol>
<p>You should now have lots of files in <em>SES3D/MODELS/MODELS</em>. These represent the
model in a format SES3D can use.</p>
</div>
<div class="section" id="models-in-lasif">
<h3>Models in LASIF<a class="headerlink" href="#models-in-lasif" title="Permalink to this headline">¶</a></h3>
<p>LASIF can directly deal with the models used in SES3D. Each model has to placed
in a subfolder of <em>MODELS</em>. The folder name will again be used to identify the
model. For this tutorial, place the just created files in
<em>MODELS/Intial_Model</em>.</p>
<p>Now you are able to use the <strong>list_models</strong> commands.</p>
<div class="highlight-bash"><div class="highlight"><pre>lasif list_models

    1 model in project:
        Initial_Model
</pre></div>
</div>
<p>LASIF has some functionality to view the models. To launch the model viewer use
the <strong>plot_model</strong> command together with the model name.</p>
<div class="highlight-bash"><div class="highlight"><pre>lasif plot_model Initial_Model

Raw SES3D Model <span class="o">(</span>split in 48 parts<span class="o">)</span>
    Setup:
            Latitude: 34.10 - 42.90
            Longitude: 23.10 - 42.90
            Depth in km: 0.00 - 471.00
            Total element count: 211787
            Total grid point count: 13753701
    Memory requirement per component: 52.5 MB
    Available components: A, B, C, lambda, mu, rhoinv
    Available derived components: rho, vp, vsh, vsv
    Parsed components:

Enter <span class="s1">&#39;COMPONENT DEPTH&#39;</span> <span class="o">(</span><span class="s1">&#39;quit&#39;</span> to <span class="nb">exit</span><span class="o">)</span>:
</pre></div>
</div>
<p>This will print some information about the model like the available components
and the components it can derive from these. Keep in mind that for plotting one
of the derived components it potentially has to load two or more components so
keep an eye on your machines memory. The tool can currently plot horizontal
slices for arbitrary components at arbitrary depths. To do this, simply type
the component name and the desired depth in kilometer and hit enter. This opens
a new window, e.g. for <strong>vsv 100</strong>:</p>
<a class="reference internal image-reference" href="_images/vsv_100km.jpg"><img alt="_images/vsv_100km.jpg" class="align-center" src="_images/vsv_100km.jpg" style="width: 90%;" /></a>
<p>Clicking at any point of the model pops up a vertical profile of the chosen
component at the clicked position. Closing the window again will enable you to
plot a different component or different depth. To leave the model viewer simply
type <strong>quit</strong>.</p>
</div>
</div>
<div class="section" id="synthetics">
<h2>Synthetics<a class="headerlink" href="#synthetics" title="Permalink to this headline">¶</a></h2>
<p>Now that everything is set up, you have to actually perform the simulations.
Please keep in mind that the adjoint forward simulation require a very large
amount of disc space due to the need to store the forward wavefield. <strong>The
example for this tutorial requires around 450 GB.</strong></p>
<p>The important output of the simulation are the waveform files. These should be
placed in the <em>SYNTHETICS/{{EVENT_NAME}}/ITERATION_{{ITERATION_NAME}}</em> folder.
So for the given examples, they should be placed in the
<em>SYNTHETICS/GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11/ITERATION_1</em> and
<em>SYNTHETICS/GCMT_event_TURKEY_Mag_5.9_2011-5-19-20-15/ITERATION_1</em>. Just put
the raw output files of the simulation in the corresponding folder; there is
no need to process them in any way.</p>
</div>
<div class="section" id="misfit-and-adjoint-source-calculation">
<h2>Misfit and Adjoint Source Calculation<a class="headerlink" href="#misfit-and-adjoint-source-calculation" title="Permalink to this headline">¶</a></h2>
<p>In order to simulate the adjoint wavefield one needs to calculate the adjoint
sources. An adjoint source is usually dependent on the misfit between the
synthetics and real data.</p>
<p>LASIF currently supports misfits in the time-frequency domain as defined by
Fichtner, 2008. Great care has to be taken to avoid cycle skips/phase jumps
between synthetics and data. This is achieved by careful windowing.</p>
<div class="section" id="weighting-scheme">
<h3>Weighting Scheme<a class="headerlink" href="#weighting-scheme" title="Permalink to this headline">¶</a></h3>
<p>You might have noticed that at various points it has been possible to
distribute weights. These weights all contribute to the final adjoint source.
The inversion scheme requires one adjoint source per iteration, event, station,
and component.</p>
<p>In each iteration&#8217;s XML file you can specify the weight for each event, denoted
as <span class="math">\(w_{event}\)</span> in the following. The weight is allowed to range between
0.0 and 1.0. A weight of 0.0 corresponds to no weight at all, e.g. skip the
event and a weight of 1.0 is the maximum weight.</p>
<p>Within each event is possible to weight each station separately, in the
following named <span class="math">\(w_{station}\)</span>. The station weights can also range from
0.0 to 1.0 and follow the same logic as the event weights.</p>
<p>You can furthermore choose an arbitrary number of windows per component for
which the misfit and adjoint source will be calculated. Each window has a
separate weight with the only limitation being that the weight has to be
positive. Assuming <span class="math">\(N\)</span> windows in a given component, the corresponding
adjoint sources will be called <span class="math">\(ad\_src_{1..N}\)</span> while their weights are
<span class="math">\(w_{1..N}\)</span>.</p>
<p>The final adjoint source for every component will be calculated according to
the following formula:</p>
<div class="math">
\[adj\_source = w_{event} \cdot w_{station} \cdot \frac{1}{\sum_{i=1}^N w_i} \cdot \sum_{i=1}^N w_i \cdot ad\_src_i\]</div>
</div>
<div class="section" id="misfit-gui">
<h3>Misfit GUI<a class="headerlink" href="#misfit-gui" title="Permalink to this headline">¶</a></h3>
<p>LASIF comes with a graphical utility dubbed the Misfit GUI, that helps to pick
correct windows.</p>
<p>To launch it, execute the <strong>launch_misfit_gui</strong> together with the iteration
name and the event name.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif launch_misfit_gui 1 GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
</pre></div>
</div>
<p>This will open a window akin to the following:</p>
<a class="reference internal image-reference" href="_images/misfit_gui.png"><img alt="_images/misfit_gui.png" class="align-center" src="_images/misfit_gui.png" style="width: 90%;" /></a>
<p>It is essentially partitioned into three parts. The top part is devoted to plot
all three traces of a single station. The bottom left part shows a
representation of the misfit for the last chosen window and the bottom left
part shows a simple map.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The current interface is based purely on matplotlib. This has the advantage
of keeping dependencies to minimum. Unfortunately matplotlib is not a GUI
toolkit and therefore the GUI is not particularly pleasing from a UI/UX
point of view. Some operations might feel clunky. We might move to a proper
GUI toolkit in the future.</p>
</div>
<p>With the <strong>Next</strong> and <strong>Prev</strong> button you can jump from one station to the
next. The <strong>Reset Station</strong> button will remove all windows for the current
station.</p>
<p>The weight for any window has to be chosen before the windows are picked. To
chose the current weight, press the <strong>w</strong> key. At this point, the weight box
will be red. Now simply type the desired new weight and press <strong>Enter</strong> to
finish setting the new weight. All windows chosen from this point on will
be assigned this weight.</p>
<p>To actually choose a window simply drag in any of the waveform windows. Upon
mouse button release the window will be saved and the adjoint source will be
calculated. The number in the top left of each chosen window reflects the
weight for that window.</p>
<p>Right clicking on an already existing window will delete it, left clicking will
plot the misfit once again.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At any point you can press <strong>h</strong> to get an up-to-date help text for the
GUI.</p>
</div>
</div>
<div class="section" id="final-adjoint-source-calculation">
<h3>Final Adjoint Source Calculation<a class="headerlink" href="#final-adjoint-source-calculation" title="Permalink to this headline">¶</a></h3>
<p>During window selection the adjoint source for each chosen window will be
stored separately. To combine them to, apply the weighting scheme and convert
them to a format, that SES3D can actually use, run the
<strong>finalize_adjoint_sources</strong> command with the iteration name and the event
name.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif finalize_adjoint_sources 1 GCMT_event_TURKEY_Mag_5.1_2010-3-24-14-11
</pre></div>
</div>
<p>This will also rotate the adjoint sources to the frame of reference used in the
simulations.</p>
<p>If you pick any more windows or change them in any way, you need to run the
command again.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="how_lasif_finds_coordinates.html">How LASIF Finds Coordinates</a></li>
</ul>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="how_lasif_finds_coordinates.html" class="btn btn-neutral float-right" title="How LASIF Finds Coordinates"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Lion Krischer &amp; Andreas Fichtner.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>