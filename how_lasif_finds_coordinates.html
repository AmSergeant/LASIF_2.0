

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How LASIF Finds Coordinates &mdash; LASIF 0.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="LASIF 0.0.1 documentation" href="index.html"/>
        <link rel="up" title="API Documentation" href="api_doc.html"/>
        <link rel="prev" title="QueryComponent" href="components/query.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> LASIF
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Installation, Testing &amp; DevInfo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="prerequisites.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="prerequisites.html#installing-lasif">Installing LASIF</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html#testing">Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="prerequisites.html#running-the-tests">Running the Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html#building-the-documentation">Building the Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="prerequisites.html#developer-information">Developer Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="prerequisites.html#terminology">Terminology</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#further-information">Further Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#to-do-things-that-are-still-missing">TO DO: Things that are still missing</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#supported-data-formats">Supported Data Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#further-notes">Further Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#quakeml-files">QuakeML files</a></li>
<li class="toctree-l3"><a class="reference internal" href="introduction.html#synthetic-data-files">Synthetic Data Files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorial/00_interfaces.html">1. Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/00_interfaces.html#command-line-interface">1.1. Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/00_interfaces.html#web-interface">1.2. Web Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/01_creating_a_new_project.html">2. Creating a New Project</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/01_creating_a_new_project.html#configuration-file">2.1. Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/02_seismic_events.html">3. Seismic Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/03_station_data.html">4. Station Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/03_station_data.html#naming-scheme">4.1. Naming scheme</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/03_station_data.html#stations-for-tutorial">4.2. Stations for Tutorial</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/04_waveform_data.html">5. Waveform Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/04_waveform_data.html#tutorial-data">5.1. Tutorial Data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/05_download_helpers.html">6. Download Helpers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/05_download_helpers.html#downloading-waveforms">6.1. Downloading Waveforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/05_download_helpers.html#downloading-station-metadata">6.2. Downloading Station Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/06_data_inspection.html">7. Data Inspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/07_data_validation.html">8. Data Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/08_a_new_iteration.html">9. Defining a New Iteration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/08_a_new_iteration.html#the-iteration-xml-files">9.1. The Iteration XML Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/08_a_new_iteration.html#source-time-functions">9.2. Source Time Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/08_a_new_iteration.html#attenuation">9.3. Attenuation</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/08_a_new_iteration.html#data-preprocessing">9.4. Data Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/08_a_new_iteration.html#data-rejection">9.5. Data Rejection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/09_model_handling.html">10. Earth Model Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/10_generating_input_files.html">11. Generating SES3D Input Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/10_generating_input_files.html#input-file-generation">11.1. Input File Generation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/11_synthetic_waveforms.html">12. Synthetics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/11_synthetic_waveforms.html#recap">12.1. Recap</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/12_misfits_and_adjoint_sources.html">13. Misfit and Adjoint Source Calculation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/12_misfits_and_adjoint_sources.html#weighting-scheme">13.1. Weighting Scheme</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/12_misfits_and_adjoint_sources.html#misfit-gui">13.2. Misfit GUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/12_misfits_and_adjoint_sources.html#final-adjoint-source-calculation">13.3. Final Adjoint Source Calculation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/13_model_update.html">14. Model Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/14_next_iterations.html">15. Next Iterations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/14_next_iterations.html#create-a-new-iteration-from-scratch">15.1. Create a new iteration from scratch</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/14_next_iterations.html#deriving-from-an-existing-iteration">15.2. Deriving from an existing iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/14_next_iterations.html#migrating-the-misfit-windows">15.3. Migrating the misfit windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial/15_customizing_lasif.html">16. Customizing LASIF</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tutorial/15_customizing_lasif.html#common-features-of-the-custom-functions">16.1. Common Features of the Custom Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/15_customizing_lasif.html#custom-preprocessing">16.2. Custom Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/15_customizing_lasif.html#custom-synthetic-data-processing">16.3. Custom Synthetic Data Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/15_customizing_lasif.html#customize-window-picking">16.4. Customize Window Picking</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorial/15_customizing_lasif.html#customize-the-source-time-function">16.5. Customize the Source Time Function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cli.html#mpi">MPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html#command-documentation">Command Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cli.html#data-acquisition-functions">Data Acquisition Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-download-data">lasif download_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-add-gcmt-events">lasif add_gcmt_events</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-add-spud-event">lasif add_spud_event</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#event-management-functions">Event Management Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-event-info">lasif event_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-list-events">lasif list_events</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#iteration-management-functions">Iteration Management Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-select-windows">lasif select_windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-generate-input-files">lasif generate_input_files</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-calculate-all-adjoint-sources">lasif calculate_all_adjoint_sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-finalize-adjoint-sources">lasif finalize_adjoint_sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-iteration-status">lasif iteration_status</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-create-successive-iteration">lasif create_successive_iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-compare-misfits">lasif compare_misfits</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-preprocess-data">lasif preprocess_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-list-iterations">lasif list_iterations</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-create-new-iteration">lasif create_new_iteration</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-migrate-windows">lasif migrate_windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-q-model">lasif plot_q_model</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-iteration-info">lasif iteration_info</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-launch-misfit-gui">lasif launch_misfit_gui</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#misc-functions">Misc Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-debug">lasif debug</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-shell">lasif shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-serve">lasif serve</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-tutorial">lasif tutorial</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-calculate-constant-q-model">lasif calculate_constant_q_model</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#plotting-functions">Plotting Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-events">lasif plot_events</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-event">lasif plot_event</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-wavefield">lasif plot_wavefield</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-raydensity">lasif plot_raydensity</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-launch-model-gui">lasif launch_model_gui</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-windows">lasif plot_windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-stf">lasif plot_stf</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-plot-domain">lasif plot_domain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cli.html#project-management-functions">Project Management Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-info">lasif info</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-list-kernels">lasif list_kernels</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-validate-data">lasif validate_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-init-project">lasif init_project</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-list-models">lasif list_models</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-remove-empty-coordinate-entries">lasif remove_empty_coordinate_entries</a></li>
<li class="toctree-l4"><a class="reference internal" href="cli.html#lasif-build-all-caches">lasif build_all_caches</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webinterface.html">Web Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api_doc.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="iris2quakeml.html">lasif.scripts.iris2quakeml</a></li>
<li class="toctree-l2"><a class="reference internal" href="ses3d_setup_helper.html">SES3D Setup Assistant</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ses3d_setup_helper.html#module-lasif.scripts.ses3d_setup_helper">Internal Function Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="iteration_xml.html">lasif.iteration_xml</a></li>
<li class="toctree-l2"><a class="reference internal" href="rotations.html">lasif.rotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="window_selection.html">lasif.window_selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">lasif.tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.parallel.html">lasif.tools.parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.file_info_cache.html">lasif.tools.file_info_cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="components/components.html">API Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="components/events.html">EventsComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="components/inventory_db.html">InventoryDBComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="components/iterations.html">IterationsComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="components/stations.html">StationsComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="components/waveforms.html">WaveformsComponent</a></li>
<li class="toctree-l3"><a class="reference internal" href="components/query.html">QueryComponent</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">How LASIF Finds Coordinates</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">LASIF</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="api_doc.html">API Documentation</a> &raquo;</li>
      
    <li>How LASIF Finds Coordinates</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/how_lasif_finds_coordinates.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-lasif-finds-coordinates">
<h1>How LASIF Finds Coordinates<a class="headerlink" href="#how-lasif-finds-coordinates" title="Permalink to this headline">¶</a></h1>
<p>LASIF needs to know the physical coordinates of data recordings, derived
processed data, and of all synthetics waveforms. Due to the large variety of
supported formats and the possibility to freely mix formats as desired this is
not a straightforward task. The SAC/RESP combination in wide use is a
particular problem as it does not seperate station and waveform metadata. In
general LASIF is only interested in station coordinates and not single
instrument coordinates and treats the coordinates of instruments from one
station to be equal within a certain tolerance. This is explained and justified
in more detail further down the page.</p>
<p>A single strategy is employed to find the coordinates of any data recording:</p>
<ol class="arabic simple">
<li>Use the network and station code of the waveform file and see if any SEED or
StationXML file has coordinates for this station. If coordinates are found,
use them - if not keep searching. Notably RESP files do not contain
coordinates and this step will not work for them.</li>
<li>Attempt to extract the coordinates from the actual waveform file. This only
works for SAC files. If the file in question is a processed or synthetic
data file, the original raw data recording will be located and used. If
coordinates are found that way, they will be returned.</li>
<li>If all else fails, a webrequest will be dispatched to ArcLink and IRIS in an
attempt to get the coordinates or the user will have to manually enter the
coordinates. There is currently no pretty interface to manually enter the
coordinates so please contact the developers if that is something you need.</li>
<li>A warning will be raised if all these steps failed and the user is expected
to either remove the data in question or manually enter the coordinates.</li>
</ol>
<p>The following image illustrates the procedure:</p>
<a class="reference internal image-reference" href="_images/how_lasif_finds_coordinates.png"><img alt="_images/how_lasif_finds_coordinates.png" src="_images/how_lasif_finds_coordinates.png" style="width: 100%;" /></a>
<p>Oftentimes one single seismic station contains several instruments. According
to the SEED standard, these instruments are differentiated by different
location strings. These can have slightly different coordinates, e.g. one
instrument in a borehole, one at ground level.</p>
<p>LASIF is usually only interested in the coordinates of a station. To derive it,
it checks the coordinates of all the station&#8217;s instruments and asserts they are
equal to a certain tolerance. If not, it picks the first coordinate set it
finds and raises a warning.</p>
<p>The tolerance is equal to either 0.01 degree (for lat/lng) or 1000 meters (for
elevation and local depth).</p>
<p>This approach is justified when using LASIF for continental and global scale
inversions. If your application has different demands, please contact the
developers so a suitable solution can be found.</p>
<p>Keep in mind that this will trigger on stations that moved with time. This
should be only a very small subset and thus corresponding stations should be
removed.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="components/query.html" class="btn btn-neutral" title="QueryComponent" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Lion Krischer &amp; Andreas Fichtner.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>