
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to LASIF’s Documentation! &mdash; LASIF 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="LASIF 0.0.1 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">LASIF 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-lasif-s-documentation">
<h1>Welcome to LASIF&#8217;s Documentation!<a class="headerlink" href="#welcome-to-lasif-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>LASIF (<strong>LA</strong>arg-scale <strong>S</strong>seismic <strong>I</strong>nversion <strong>F</strong>ramework) is a
<strong>data-driven workflow tool</strong> to perform full waveform inversions.
It is opinionated and strict meaning that it forces a certain data and
directory structure. The upside is that it only requires a very minimal amount
of configuration and maintenance. It attempts to gather all necessary
information from the data itself so there is no need to keep index or content
files.</p>
<p>All parts of LASIF can work completely on their own. See the class and
function documentation at the end of this document. Furthermore LASIF offers
a project based inversion workflow management system which is introduced in the
following tutorial.</p>
</div>
<div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>LASIF works with the notion of so called inversion projects. A project is
defined as a series of iterations working on the same physical domain. Where
possible and useful, LASIF will use XML files to store information. The
reasoning behind this is twofold. It is easily machine and human readable. It
also serves as a preparatory step towards a fully database driven full waveform
inversion workflow as all necessary information is already stored in an easily
indexable data format.</p>
<div class="section" id="creating-a-new-project">
<h2>Creating a New Project<a class="headerlink" href="#creating-a-new-project" title="Permalink to this headline">¶</a></h2>
<p>The necessary first step, whether for starting a new inversion or migrating an
already existing inversion to LASIF, is to create a new project. In the
following the project will be called <strong>MyInversion</strong>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif init_project MyInversion
</pre></div>
</div>
<p>This will create the following directory structure:</p>
<div class="highlight-python"><pre>MyInversion
|-- config.xml
|-- DATA
|-- EVENTS
|-- LOGS
|-- MODELS
|-- OUTPUT
|-- SOURCE_TIME_FUNCTIONS
|   |-- heaviside_60s_500s.py
|-- STATIONS
|   |-- RESP
|   |-- SEED
|   |-- StationXML
|-- SYNTHETICS
|-- TEMPLATES</pre>
</div>
<p>The configuration for each project works , is defined in the <strong>config.xml</strong>
file. It is a simple, self-explanatory XML format. The nature of SES3D&#8217;s
coordinate system has the effect that simulation is most efficient in
equatorial regions. Thus it is oftentimes advantageous to rotate the frame of
reference so that the simulation happens close to the equator. LASIF first
defines the simulation domain; the actual simulation happens here. Optional
rotation parameters define the physical location of the domain. The coordinate
system for the rotation parameters is described in <a class="reference internal" href="rotations.html#module-lasif.rotations" title="lasif.rotations"><tt class="xref py py-mod docutils literal"><span class="pre">lasif.rotations</span></tt></a>.
You will have to edit the file to adjust it to your region of interest. It will
look something like the following.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;lasif_project&gt;</span>
    <span class="nt">&lt;name&gt;</span>MyInversion<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;description&gt;&lt;/description&gt;</span>
    <span class="nt">&lt;download_settings&gt;</span>
        <span class="nt">&lt;arclink_username&gt;&lt;/arclink_username&gt;</span>
        <span class="nt">&lt;seconds_before_event&gt;</span>300<span class="nt">&lt;/seconds_before_event&gt;</span>
        <span class="nt">&lt;seconds_after_event&gt;</span>3600<span class="nt">&lt;/seconds_after_event&gt;</span>
    <span class="nt">&lt;/download_settings&gt;</span>
    <span class="nt">&lt;domain&gt;</span>
      <span class="nt">&lt;domain_bounds&gt;</span>
        <span class="nt">&lt;minimum_longitude&gt;</span>-20.0<span class="nt">&lt;/minimum_longitude&gt;</span>
        <span class="nt">&lt;maximum_longitude&gt;</span>20.0<span class="nt">&lt;/maximum_longitude&gt;</span>
        <span class="nt">&lt;minimum_latitude&gt;</span>-20.0<span class="nt">&lt;/minimum_latitude&gt;</span>
        <span class="nt">&lt;maximum_latitude&gt;</span>20.0<span class="nt">&lt;/maximum_latitude&gt;</span>
        <span class="nt">&lt;minimum_depth_in_km&gt;</span>0.0<span class="nt">&lt;/minimum_depth_in_km&gt;</span>
        <span class="nt">&lt;maximum_depth_in_km&gt;</span>200.0<span class="nt">&lt;/maximum_depth_in_km&gt;</span>
        <span class="nt">&lt;boundary_width_in_degree&gt;</span>3.0<span class="nt">&lt;/boundary_width_in_degree&gt;</span>
      <span class="nt">&lt;/domain_bounds&gt;</span>
      <span class="nt">&lt;domain_rotation&gt;</span>
        <span class="nt">&lt;rotation_axis_x&gt;</span>1.0<span class="nt">&lt;/rotation_axis_x&gt;</span>
        <span class="nt">&lt;rotation_axis_y&gt;</span>1.0<span class="nt">&lt;/rotation_axis_y&gt;</span>
        <span class="nt">&lt;rotation_axis_z&gt;</span>1.0<span class="nt">&lt;/rotation_axis_z&gt;</span>
        <span class="nt">&lt;rotation_angle_in_degree&gt;</span>-45.0<span class="nt">&lt;/rotation_angle_in_degree&gt;</span>
      <span class="nt">&lt;/domain_rotation&gt;</span>
    <span class="nt">&lt;/domain&gt;</span>
<span class="nt">&lt;/lasif_project&gt;</span>
</pre></div>
</div>
<p>It should be fairly self-explanatory.</p>
<ul class="simple">
<li>The <em>boundary_width_in_degree</em> tag is just used for the download helpers. No
data will be downloaded within <em>boundary_width_in_degree</em> distance to the
domain border. This is useful for e.g. absorbing boundary conditions.</li>
<li>The <em>arclink_username</em> tag should be your email. It will be send with all
requests to the ArcLink network. They ask for it in case they have to contact
you for whatever reason. Please provide a real email address. Must not be
empty.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All <strong>lasif</strong> commands work and use the correct project as long as they
are executed somewhere inside a projects folder structure.</p>
</div>
<p>At any point you can have a look at the defined domain with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>MyInversion
<span class="nv">$ </span>lasif plot_domain
</pre></div>
</div>
<p>This will open a window showing the location of the physical domain and the
simulation domain. The inner contours show the domain minus the previously
defined boundary width.</p>
<p>(<a class="reference external" href=".//index-1.py">Source code</a>, <a class="reference external" href=".//index-1.png">png</a>, <a class="reference external" href=".//index-1.hires.png">hires.png</a>, <a class="reference external" href=".//index-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/index-1.png" src="_images/index-1.png" />
</div>
</div>
<div class="section" id="adding-seismic-events">
<h2>Adding Seismic Events<a class="headerlink" href="#adding-seismic-events" title="Permalink to this headline">¶</a></h2>
<p>All events have to be stored in the <em>EVENTS</em> subfolder of the project. They
have to be valid QuakeML files with full moment tensor information. LASIF
provides some convenience methods for this purpose. One can leverage the IRIS
SPUD service (<a class="reference external" href="http://www.iris.edu/spud/momenttensor">http://www.iris.edu/spud/momenttensor</a>) to get GlobalCMT events.
Simply search for an event and copy the url. The <strong>iris2quakeml</strong> script will
then grab the QuakeML from the url and store an XML file in the current folder.</p>
<p>See <a class="reference internal" href="iris2quakeml.html"><em>lasif.scripts.iris2quakeml</em></a> for more information. The LASIF command lines tools
contain a convenience wrapper around it that also makes sure that the event
ends up in the correct folder.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif add_spud_event http://www.iris.edu/spud/momenttensor/959525
<span class="nv">$ </span>lasif add_spud_event http://www.iris.edu/spud/momenttensor/995655
</pre></div>
</div>
<p>All events can be viewed with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_events
</pre></div>
</div>
<p>(<a class="reference external" href=".//index-2.py">Source code</a>, <a class="reference external" href=".//index-2.png">png</a>, <a class="reference external" href=".//index-2.hires.png">hires.png</a>, <a class="reference external" href=".//index-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/index-2.png" src="_images/index-2.png" />
</div>
</div>
<div class="section" id="waveform-data">
<h2>Waveform Data<a class="headerlink" href="#waveform-data" title="Permalink to this headline">¶</a></h2>
<p>Every inversion needs real data to be able to quantify misfits. The waveform
data for all events are stored in the <em>DATA</em> subfolder. The data for each
single event will be stored in a subfolder of the <em>DATA</em> folder with the
<strong>same name as the QuakeML file minus the .xml</strong>.</p>
<p>These folder are automatically created and updated each time a lasif command is
executed. The simplest command is</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif info
</pre></div>
</div>
<p>This will result in a directory structure in the fashion of:</p>
<div class="highlight-python"><pre>MyInversion
|-- DATA
|   |-- GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35
|   |-- GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9
|-- EVENTS
|   |-- GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35.xml
|   |-- GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9.xml
|-- LOGS
|-- MODELS
|-- OUTPUT
|-- SOURCE_TIME_FUNCTIONS
|-- STATIONS
|   |-- RESP
|   |-- SEED
|   |-- StationXML
|-- SYNTHETICS
|   |-- GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35
|   |-- GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9
|-- TEMPLATES
|-- config.xml</pre>
</div>
<p>All data in the <em>DATA</em> subfolder has to be real data. The data is further
structured by assigning a tag to every data set. A tag is assigned by simply
placing a folder in <em>ROOT/DATA/EVENT_NAME</em> and putting all data in there. The
special tag <em>raw</em> is reserved for the raw waveforms straight from the
datacenters or some other source. Other tags should describe the filtering and
processing applied to the data. The same is true for synthetic waveform data,
except that in that case, the data resides in the <em>SYNTHETICS</em> folder and the
tags should describe the simulation ran to obtain the waveforms.</p>
<p>After a while, the structure might look like this:</p>
<div class="highlight-python"><pre>MyInversion
|-- DATA
    |-- GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35
        |-- raw
            ...
        |-- 100s_to_10s_bandpass
            ...
        |-- 200s_to_20s_bandpass
            ...
|-- SYNTHETICS
    |-- GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35
        |-- inversion_1_100s
            ...
        |-- inversion_2_100s
            ...
        |-- inversion_2_50s
            ...
|-- ...</pre>
</div>
<p><strong>The user is responsible</strong> for adhering to that structure. Otherwise other
parts of LASIF cannot operate properly.</p>
</div>
<div class="section" id="station-data">
<h2>Station Data<a class="headerlink" href="#station-data" title="Permalink to this headline">¶</a></h2>
<p>LASIF needs to know the coordinates and instrument response of each channel.
One way to achieve this to use SAC files, which contain coordinates, and RESP
files containing the response information for each channel. Another possibility
is to use MiniSEED waveform data and the corresponding dataless SEED or
StationXML files. Please keep in mind that LASIF currently expects to only
have channels of one station in each dataless SEED and StationXML file.</p>
<div class="section" id="naming-scheme">
<h3>Naming scheme<a class="headerlink" href="#naming-scheme" title="Permalink to this headline">¶</a></h3>
<p><strong>dataless SEED</strong></p>
<p>All dataless SEED files are expected to be in the <em>STATIONS/SEED</em> directory and
be named after the following scheme:</p>
<div class="highlight-python"><pre>dataless.NETWORK_STATION[.X]</pre>
</div>
<p><em>NETWORK</em>, and <em>STATION</em> should be replaced with the corresponding network and
stations codes. It is possible that multiple files are needed for each station
(e.g. different files for different time intervals/channels) and thus <em>.1</em>,
<em>.2</em>, ... can be appended to the filename. LASIF will automatically choose
the correct file in case they need to be accessed.</p>
<p><strong>StationXML</strong></p>
<p>All StationXML files are expected to be placed in the <em>STATIONS/StationXML</em>
folder and following the scheme:</p>
<div class="highlight-python"><pre>station.NETWORK_STATION[.X].xml</pre>
</div>
<p>The logic for for the different parts is the same as for the dataless SEED
files described in the previous paragraph.</p>
<p><strong>RESP Files</strong></p>
<p>All RESP files are to be put in the <em>STATIONS/RESP</em> folder with the following
name:</p>
<div class="highlight-python"><pre>RESP.NETWORK.STATION.LOCATION.CHANNEL[.X]</pre>
</div>
<p>In contrast to the two other station information formats the RESP filename also
has to include the location and channel identifiers.</p>
</div>
</div>
<div class="section" id="download-helpers">
<h2>Download Helpers<a class="headerlink" href="#download-helpers" title="Permalink to this headline">¶</a></h2>
<p>LASIF comes with a collection of scripts that help downloading waveform and
station data from the IRIS and ArcLink services. Waveform data will always be
downloaded as MiniSEED. Station data will, due to the different products of the
dataservices, either be downloaded as StationXML (IRIS) or dataless SEED.
Furthermore, as many tools so far are not able to deal with StationXML data,
the RESP files for each channel will also be downloaded. This is redundant
information but enables the use of many tools otherwise not possible.</p>
<div class="section" id="downloading-waveforms">
<h3>Downloading Waveforms<a class="headerlink" href="#downloading-waveforms" title="Permalink to this headline">¶</a></h3>
<p>Waveforms are downloaded on a per event basis. The <strong>config.xml</strong> file contains
some specification to detail the download. Each event is referred to by its
name which is simply the filename minus the extension. To get a list of all
events in the current project just execute</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif list_events

2 events in project:
    GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35
    GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9
</pre></div>
</div>
<p>To download the waveform data for one event, choose one and run</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif download_waveforms GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35
</pre></div>
</div>
<p>This, dependent on the domain size, event location, and origin time can take a
while. Executing the same command again will only attempt to download data not
already present. All data will be placed in <cite>DATA/EVENT_NAME/raw</cite>.</p>
</div>
<div class="section" id="downloading-station-data">
<h3>Downloading Station Data<a class="headerlink" href="#downloading-station-data" title="Permalink to this headline">¶</a></h3>
<p>LASIF also includes some functionality to download station metadata. It will,
download StationXML and RESP files from IRIS and dataless SEED and RESP files
from ArcLink. It works the same as it does for the waveforms. To download all
stations for one event simply execute</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif download_stations GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <cite>lasif download_stations</cite> command will, for the specified event, figure
what waveform data is present in the <cite>DATA/EVENT_NAME/raw</cite> folder and
download all missing station metadata information for these files.</p>
</div>
<p>At this point, LASIF is able to match available station and waveform
information. To get an overview, of what data is actually stored for the given event, just execute:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif event_info GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9

Earthquake with 6.1 Mw at AZORES ISLANDS REGION
        Latitude: 37.400, Longitude: -24.380, Depth: 12.0 km
        2007-04-07T07:09:29.500000Z UTC

Station and waveform information available at 8 stations:

<span class="o">===========================================================================</span>
             id       latitude      longitude      elevation    <span class="nb">local </span><span class="nv">depth</span>
<span class="o">===========================================================================</span>
        GE.CART        37.5868        -1.0012           65.0            5.0
         GE.MTE        40.3997        -7.5442          815.0            3.0
         GE.SFS        36.4656        -6.2055           21.0            5.0
         IU.PAB        39.5446      -4.349899          950.0            0.0
         PM.MTE        40.3997        -7.5442          815.0            3.0
       PM.PESTR        38.8672        -7.5902          410.0            0.0
        PM.PVAQ        37.4037        -7.7173          200.0            0.0
        WM.CART        37.5868        -1.0012           65.0            5.0
</pre></div>
</div>
<p>It is furthermore possible to plot the availability information for one event including ray coverage with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_event GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9
</pre></div>
</div>
<p>(<a class="reference external" href=".//index-3.py">Source code</a>, <a class="reference external" href=".//index-3.png">png</a>, <a class="reference external" href=".//index-3.hires.png">hires.png</a>, <a class="reference external" href=".//index-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/index-3.png" src="_images/index-3.png" />
</div>
</div>
</div>
<div class="section" id="generating-ses3d-input-files">
<h2>Generating SES3D Input Files<a class="headerlink" href="#generating-ses3d-input-files" title="Permalink to this headline">¶</a></h2>
<p>LASIF is currently capable of producing input files for SES3D 4.0. It is very
straightforward and knows what data is available for every event and thus can
generate these files fully automatically.</p>
<div class="section" id="preparatory-steps">
<h3>Preparatory Steps<a class="headerlink" href="#preparatory-steps" title="Permalink to this headline">¶</a></h3>
<p>Before the first input file can be generated some preparatory steps need to be
performed. This is only necessary once at the start or when you make
significant changes to how the simulations are performed.</p>
<div class="section" id="input-file-templates">
<h4>Input File Templates<a class="headerlink" href="#input-file-templates" title="Permalink to this headline">¶</a></h4>
<p>At least almost fully automatically. It is necessary to create a template with
the non-derivable configuration values first. This template will then be used
as a basis for all generated input files. It is possible (and encouraged) to
created multiple templates to cover various situations.</p>
<p>To create a basic template (in this case for SES3D 4.0) run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif generate_input_file_template ses3d_4_0
</pre></div>
</div>
<p>This will create a (hopefully self-explaining) XML input file template, that <strong>MUST BE EDITED</strong>.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
<span class="nt">&lt;ses3d_4_0_input_file_template&gt;</span>
  <span class="nt">&lt;simulation_parameters&gt;</span>
    <span class="nt">&lt;number_of_time_steps&gt;</span>500<span class="nt">&lt;/number_of_time_steps&gt;</span>
    <span class="nt">&lt;time_increment&gt;</span>0.75<span class="nt">&lt;/time_increment&gt;</span>
    <span class="nt">&lt;is_dissipative&gt;</span>false<span class="nt">&lt;/is_dissipative&gt;</span>
  <span class="nt">&lt;/simulation_parameters&gt;</span>
  <span class="nt">&lt;output_directory&gt;</span>../OUTPUT/CHANGE_ME/<span class="nt">&lt;/output_directory&gt;</span>
  <span class="nt">&lt;adjoint_output_parameters&gt;</span>
    <span class="nt">&lt;sampling_rate_of_forward_field&gt;</span>10<span class="nt">&lt;/sampling_rate_of_forward_field&gt;</span>
    <span class="nt">&lt;forward_field_output_directory&gt;</span>../OUTPUT/CHANGE_ME/ADJOINT<span class="nt">&lt;/forward_field_output_directory&gt;</span>
  <span class="nt">&lt;/adjoint_output_parameters&gt;</span>
  <span class="nt">&lt;computational_setup&gt;</span>
    <span class="nt">&lt;nx_global&gt;</span>15<span class="nt">&lt;/nx_global&gt;</span>
    <span class="nt">&lt;ny_global&gt;</span>15<span class="nt">&lt;/ny_global&gt;</span>
    <span class="nt">&lt;nz_global&gt;</span>10<span class="nt">&lt;/nz_global&gt;</span>
    <span class="nt">&lt;lagrange_polynomial_degree&gt;</span>4<span class="nt">&lt;/lagrange_polynomial_degree&gt;</span>
    <span class="nt">&lt;px_processors_in_theta_direction&gt;</span>1<span class="nt">&lt;/px_processors_in_theta_direction&gt;</span>
    <span class="nt">&lt;py_processors_in_phi_direction&gt;</span>1<span class="nt">&lt;/py_processors_in_phi_direction&gt;</span>
    <span class="nt">&lt;pz_processors_in_r_direction&gt;</span>1<span class="nt">&lt;/pz_processors_in_r_direction&gt;</span>
  <span class="nt">&lt;/computational_setup&gt;</span>
<span class="nt">&lt;/ses3d_4_0_input_file_template&gt;</span>
</pre></div>
</div>
<p>In case something is not fully clear, please refer to the SES3D 4.0 manual or contact the author. It is important to understand that each template file will be used as basis for all generated input files.</p>
<p>Input file templates are again refered to by their filename minus the XML
extension. To get a list of all available templates use:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif list_input_file_templates

Project has 1 input file template:
        ses3d_4_0_template
</pre></div>
</div>
<p>You can (and maybe should) rename the actual template files to make it more
descriptive.</p>
</div>
<div class="section" id="source-time-functions">
<h4>Source Time Functions<a class="headerlink" href="#source-time-functions" title="Permalink to this headline">¶</a></h4>
<p>The source time function will be dynamically generated for each run. An example
source time function has been generated upon project initialization and is
located in the <em>SOURCE_TIME_FUNCTIONS</em> subdirectory.</p>
<p>To create your own source time functions simply copy the already existing one
and modify it. Each source time function has to live in it&#8217;s own Python file
and a function <strong>source_time_function(npts, delta)</strong> has to be defined in it.
It should return either a list of floats or a numpy array with npts items.</p>
<p>As always, they are referred to via their file name. To get a list of all
available source time functions type:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif list_stf

Project has 1 defined <span class="nb">source time </span><span class="k">function</span>
<span class="k">        </span>heaviside_60s_500s
</pre></div>
</div>
<p>It is furthermore possible to get a nice plot for every source time function.
This is useful for visually judging the frequency content that goes into your
simulation. This is done with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_stf SOURCE_TIME_FUNCTION NPTS DELTA
</pre></div>
</div>
<p>The number of samples and the sample spacing of any simulation should be known.
SOURCE_TIME_FUNCTION again is the name of the source time function.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif plot_stf heaviside_60s_500s 1500 0.75
</pre></div>
</div>
<p>(<a class="reference external" href=".//index-4.py">Source code</a>, <a class="reference external" href=".//index-4.png">png</a>, <a class="reference external" href=".//index-4.hires.png">hires.png</a>, <a class="reference external" href=".//index-4.pdf">pdf</a>)</p>
<div class="figure">
<img alt="_images/index-4.png" src="_images/index-4.png" />
</div>
</div>
</div>
<div class="section" id="input-file-generation">
<h3>Input File Generation<a class="headerlink" href="#input-file-generation" title="Permalink to this headline">¶</a></h3>
<p>Now that all requirements are fulfilled we can finally generate the input
files. Input files are generated  with the command</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif generate_input_files EVENT_NAME TEMPLATE_NAME TYPE SOURCE_TIME_FCT
</pre></div>
</div>
<p><strong>TYPE</strong> has to be one of</p>
<blockquote>
<div><ul class="simple">
<li><em>normal_simulation</em></li>
<li><em>adjoint_forward</em></li>
<li><em>adjoint_reverse</em></li>
</ul>
</div></blockquote>
<p>The other parameters have to correspond to files in the project folder. Please
remember that you can different commands to figure out what files are part of
the project.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif list_events
2 events in project:
        GCMT_event_AZORES-CAPE_ST._VINCENT_RIDGE_Mag_6.0_2007-2-12-10-35
                GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9

<span class="nv">$ </span>lasif list_input_file_templates
Project has 1 input file template:
        ses3d_4_0_template

<span class="nv">$ </span>lasif list_stf
Project has 1 defined <span class="nb">source time </span><span class="k">function</span>:
        heaviside_60s_500s
</pre></div>
</div>
<p>Once everything is figured out, actual input files can be generated with:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>lasif generate_input_files GCMT_event_AZORES_ISLANDS_REGION_Mag_6.1_2007-4-7-7-9 <span class="se">\</span>
    ses3d_4_0_template normal_simulation heaviside_60s_500s

Written files to <span class="s1">&#39;.../OUTPUT/input_files___ses3d_4_0_template___2013-03-26T20:04:24.005713&#39;</span>.
</pre></div>
</div>
<p>If you are working in a rotated domain, all station coordinates and moment
tensors will automatically been rotated accordingly so that the actual
simulation can take place in an unrotated frame of reference.</p>
<p>Together with some models, these file can directly be used to run SES3D. For
the first couple of runs it is likely a good idea to check these file by hand
to verify your setup and potentially also the correctness of this tool suite.</p>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to LASIF&#8217;s Documentation!</a></li>
<li><a class="reference internal" href="#tutorial">Tutorial</a><ul>
<li><a class="reference internal" href="#creating-a-new-project">Creating a New Project</a></li>
<li><a class="reference internal" href="#adding-seismic-events">Adding Seismic Events</a></li>
<li><a class="reference internal" href="#waveform-data">Waveform Data</a></li>
<li><a class="reference internal" href="#station-data">Station Data</a><ul>
<li><a class="reference internal" href="#naming-scheme">Naming scheme</a></li>
</ul>
</li>
<li><a class="reference internal" href="#download-helpers">Download Helpers</a><ul>
<li><a class="reference internal" href="#downloading-waveforms">Downloading Waveforms</a></li>
<li><a class="reference internal" href="#downloading-station-data">Downloading Station Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-ses3d-input-files">Generating SES3D Input Files</a><ul>
<li><a class="reference internal" href="#preparatory-steps">Preparatory Steps</a><ul>
<li><a class="reference internal" href="#input-file-templates">Input File Templates</a></li>
<li><a class="reference internal" href="#source-time-functions">Source Time Functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input-file-generation">Input File Generation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">LASIF 0.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Lion Krischer &amp; Andreas Fichtner.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>